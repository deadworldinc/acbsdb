<!DOCTYPE html>
<html lang="ru" data-theme="light">

<head>
	<title>База данных оборудования ЦБС</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
	<script src="https://cdn.jsdelivr.net/npm/pdfmake@latest/build/pdfmake.min.js "></script> 
	<script src="https://cdn.jsdelivr.net/npm/pdfmake@latest/build/vfs_fonts.min.js"></script> 
	<script src="https://cdn.jsdelivr.net/npm/html-to-pdfmake/browser.js"></script> 
	<script src="/database/sorttable.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
	<dialog id="dialogAddEntry">
        <div class="dialog-header">
            <span class="default-text">Добавление записи</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x" onclick="dialogAddEntry.close();"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
        </div>
        <div class="dialog-container">
            <span class="default-text" style="display: block; padding: 15px; opacity: 0.75;">Для добавления новой записи, заполните все поля ниже и нажмите кнопку "Сохранить".</span>
        </div>
		<div class="dialog-container no-padding no-border-bottom">
			<div class="alternative-input-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house-icon lucide-house"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
				<input id="inputBranch" class="alternative-input" placeholder="Филиал" autocomplete="off">
			</div>
			<div class="alternative-input-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-user-icon lucide-circle-user"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/></svg>
				<input id="inputResponsiblePerson" class="alternative-input" placeholder="Ответственное лицо" autocomplete="off">
			</div>
			<div class="alternative-input-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-text-icon lucide-text"><path d="M15 18H3"/><path d="M17 6H3"/><path d="M21 12H3"/></svg>
				<input id="inputName" class="alternative-input" placeholder="Наименование" autocomplete="off">
			</div>
			<div class="alternative-input-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy-minus-icon lucide-copy-minus"><line x1="12" x2="18" y1="15" y2="15"/><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
				<input id="inputInventoryNumber" class="alternative-input" placeholder="Инв. номер" autocomplete="off">
			</div>
			<div class="alternative-input-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sigma-icon lucide-sigma"><path d="M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2"/></svg>
				<input id="inputAmount" class="alternative-input" placeholder="Сумма" autocomplete="off">
			</div>
			<div class="alternative-input-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-ordered-icon lucide-list-ordered"><path d="M10 12h11"/><path d="M10 18h11"/><path d="M10 6h11"/><path d="M4 10h2"/><path d="M4 6h1v4"/><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
				<input id="inputQuantity" class="alternative-input" placeholder="Количество" autocomplete="off">
			</div>
        </div>
        <div class="dialog-footer">
            <button class="dialog-footer-button" onclick="dialogAddEntry.close();">Закрыть</button>
            <button id="buttonSave" class="dialog-footer-button action-button" style="margin-left: 10px;">Сохранить</button>
        </div>
    </dialog>
	<dialog id="dialogEditEntry">
        <div class="dialog-header">
            <span class="default-text">Редактирование записи</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x" onclick="dialogEditEntry.close();"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
        </div>
        <div class="dialog-container">
            <span class="default-text" style="display: block; padding: 15px; opacity: 0.75;">
				Для редактирования существующей записи, введите ID этой записи и нажмите кнопку "Получить данные". 
				После получения данных, введите новые данные в соответвующие поля и нажмите кнопку "Сохранить".
			</span>
        </div>
		<div class="dialog-container no-padding no-border-bottom">
			<div class="alternative-input-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cog-icon lucide-cog"><path d="M11 10.27 7 3.34"/><path d="m11 13.73-4 6.93"/><path d="M12 22v-2"/><path d="M12 2v2"/><path d="M14 12h8"/><path d="m17 20.66-1-1.73"/><path d="m17 3.34-1 1.73"/><path d="M2 12h2"/><path d="m20.66 17-1.73-1"/><path d="m20.66 7-1.73 1"/><path d="m3.34 17 1.73-1"/><path d="m3.34 7 1.73 1"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="12" r="8"/></svg>
				<input id="inputId" class="alternative-input" placeholder="ID" autocomplete="off">
			</div>
			<div id="inputsContainer" style="display: none;">
				<div class="alternative-input-container">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house-icon lucide-house"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
					<input id="inputBranchEdit" class="alternative-input" placeholder="Филиал" autocomplete="off">
				</div>
				<div class="alternative-input-container">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-user-icon lucide-circle-user"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/></svg>
					<input id="inputResponsiblePersonEdit" class="alternative-input" placeholder="Ответственное лицо" autocomplete="off">
				</div>
				<div class="alternative-input-container">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-text-icon lucide-text"><path d="M15 18H3"/><path d="M17 6H3"/><path d="M21 12H3"/></svg>
					<input id="inputNameEdit" class="alternative-input" placeholder="Наименование" autocomplete="off">
				</div>
				<div class="alternative-input-container">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy-minus-icon lucide-copy-minus"><line x1="12" x2="18" y1="15" y2="15"/><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
					<input id="inputInventoryNumberEdit" class="alternative-input" placeholder="Инв. номер" autocomplete="off">
				</div>
				<div class="alternative-input-container">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sigma-icon lucide-sigma"><path d="M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2"/></svg>
					<input id="inputAmountEdit" class="alternative-input" placeholder="Сумма" autocomplete="off">
				</div>
				<div class="alternative-input-container">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-ordered-icon lucide-list-ordered"><path d="M10 12h11"/><path d="M10 18h11"/><path d="M10 6h11"/><path d="M4 10h2"/><path d="M4 6h1v4"/><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
					<input id="inputQuantityEdit" class="alternative-input" placeholder="Количество" autocomplete="off">
				</div>
			</div>
        </div>
        <div class="dialog-footer">
            <button class="dialog-footer-button" onclick="dialogEditEntry.close();">Закрыть</button>
            <button id="buttonGetEntry" class="dialog-footer-button action-button" style="margin-left: 10px;">Получить данные</button>
        </div>
    </dialog>
	<dialog id="dialogDeleteEntry">
        <div class="dialog-header">
            <span class="default-text">Удаление записи</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x" onclick="dialogDeleteEntry.close();"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
        </div>
        <div class="dialog-container">
            <span class="default-text" style="display: block; padding: 15px; opacity: 0.75;">
				Для удаления записи, введите ID этой записи и нажмите кнопку "Удалить запись".
				Обратите внимание: это действие невозможно отменить.
			</span>
        </div>
		<div class="dialog-container no-padding no-border-bottom">
			<div class="alternative-input-container">
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cog-icon lucide-cog"><path d="M11 10.27 7 3.34"/><path d="m11 13.73-4 6.93"/><path d="M12 22v-2"/><path d="M12 2v2"/><path d="M14 12h8"/><path d="m17 20.66-1-1.73"/><path d="m17 3.34-1 1.73"/><path d="M2 12h2"/><path d="m20.66 17-1.73-1"/><path d="m20.66 7-1.73 1"/><path d="m3.34 17 1.73-1"/><path d="m3.34 7 1.73 1"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="12" r="8"/></svg>
				<input id="inputDeleteById" class="alternative-input" placeholder="ID" autocomplete="off">
			</div>
        </div>
        <div class="dialog-footer">
            <button class="dialog-footer-button" onclick="dialogDeleteEntry.close();">Закрыть</button>
            <button id="buttonDeleteEntryById" class="dialog-footer-button action-button" style="margin-left: 10px;">Удалить запись</button>
        </div>
    </dialog>
	<dialog id="dialogServiceInfo">
        <div class="dialog-header">
            <span class="default-text">О базе данных</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x" onclick="dialogServiceInfo.close();"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
        </div>
        <div class="dialog-container">
            <span class="default-text" style="display: block; padding: 15px; opacity: 0.75;">
				Количество записей в базе данных: <span id="spanEntriesCount" class="default-text">0</span>
			</span>
        </div>
        <div class="dialog-container">
            <span class="default-text" style="display: block; padding: 15px; opacity: 0.75;">
				<span class="default-text">Количество зарегистрированных пользователей: 2</span>
			</span>
        </div>
		<div class="dialog-container">
            <span class="default-text" style="display: block; padding: 15px; opacity: 0.75;">
				<span class="default-text">Версия: <span class="default-text">1.6.2</span></span>
			</span>
        </div>
        <div class="dialog-footer">
            <button class="dialog-footer-button" onclick="dialogServiceInfo.close();">Закрыть</button>
            <button class="dialog-footer-button action-button" style="margin-left: 10px;" onclick="dialogServiceInfo.close();">Хорошо</button>
        </div>
    </dialog>
	<div class="tables-main-container">
		<div class="tables-inner-container">
			<div class="left-header">
				<span class="left-header-text">База данных оборудования ЦБС</span>
			</div>
			<div class="left-main-container">
				<div id="buttonRefreshTable" class="tables-menu-item">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw-icon lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
					<span class="default-text" style="margin-left: 5px;">Обновить таблицу</span>
				</div>
				<div id="buttonAddEntry" class="tables-menu-item">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-plus-icon lucide-circle-plus"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>
					<span class="default-text" style="margin-left: 5px;">Добавить запись</span>
				</div>
				<div id="buttonEditEntry" class="tables-menu-item">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-minus-icon lucide-circle-minus"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/></svg>
					<span class="default-text" style="margin-left: 5px;">Редактировать запись</span>
				</div>
				<div id="buttonDeleteEntry" class="tables-menu-item">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-x-icon lucide-circle-x"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>
					<span class="default-text" style="margin-left: 5px;">Удалить запись</span>
				</div>
				<div id="buttonServiceInfo" class="tables-menu-item">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info-icon lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
					<span class="default-text" style="margin-left: 5px;">О базе данных</span>
				</div>
				<div class="tables-menu-item" onclick="if (document.querySelector('html').getAttribute('data-theme') === 'dark') {document.querySelector('html').setAttribute('data-theme', 'light');} else {document.querySelector('html').setAttribute('data-theme', 'dark')}">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-icon lucide-moon"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"/></svg>
					<span class="default-text" style="margin-left: 5px;">Сменить тему</span>
				</div>
				<div id="buttonSignOut" class="tables-menu-item">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-arrow-left-icon lucide-circle-arrow-left"><circle cx="12" cy="12" r="10"/><path d="M16 12H8"/><path d="m12 8-4 4 4 4"/></svg>
					<span class="default-text" style="margin-left: 5px;">Выйти из аккаунта</span>
				</div>
			</div>
		</div>
		<div class="tables-inner-container">
			<div class="right-header">
				<div class="search-field-container">
					<input id="inputSearchByBranch" class="search-input" placeholder="Поиск по филиалу" autocomplete="off">
					<div id="buttonSearchByBranch" class="button-search">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
					</div>
				</div>
				<div class="search-field-container">
					<input id="inputSearchByName" class="search-input" placeholder="Поиск по наименованию" autocomplete="off">
					<div id="buttonSearchByName" class="button-search">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
					</div>
				</div>
				<div class="search-field-container">
					<input id="inputSearchByInventoryNumber" class="search-input" placeholder="Поиск по инв. номеру" autocomplete="off">
					<div id="buttonSearchByInventoryNumber" class="button-search">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-icon lucide-search"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
					</div>
				</div>
				<div id="buttonExportXLSX" class="button-export" style="width: 34px;">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-table2-icon lucide-table-2" style="opacity: 0.75;"><path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/></svg>
				</div>
				<div id="buttonExportPDF" class="button-export" style="width: 34px;">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text-icon lucide-file-text" style="opacity: 0.75;"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>
				</div>
				<div id="buttonPrintPDF" class="button-export" style="width: 34px;">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 26 26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-printer-icon lucide-printer" style="opacity: 0.75;"><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><path d="M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6"/><rect x="6" y="14" width="12" height="8" rx="1"/></svg>
				</div>
			</div>
			<div class="right-main-container">
				<table id="mainTable" class="main-table sortable">
					<thead>
						<tr class="table-header">
							<td class="table-header-title">ID</td>
							<td class="table-header-title">Филиал</td>
							<td class="table-header-title">Ответственное лицо</td>
							<td class="table-header-title">Наименование</td>
							<td class="table-header-title">Инв. номер</td>
							<td class="table-header-title">Сумма</td>
							<td class="table-header-title">Количество</td>
						</tr>
					</thead>
					<tr id="tableRow"></tr>
				</table>
			</div>
		</div>
	</div>
	<script type="module" src="equipmentScript.js"></script>
</body>
</html>